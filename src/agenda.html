<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ§  Agenda de Pablo ğŸš†</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§ </text></svg>">
<link rel="manifest" href="../manifest.json">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect width='180' height='180' fill='%234ecdc4' rx='20'/><text x='90' y='120' font-size='100' text-anchor='middle' fill='white'>ğŸ§ </text></svg>">
<meta name="theme-color" content="#4ecdc4">
<link rel="stylesheet" href="css/main.css">
</head>
<body>

<div class="container">
  <div class="header">
    <div style="width:120px; display: flex; align-items: center; justify-content: flex-start;">
      <span style="font-size: 40px; color: #2d5a27;">ğŸ“‹</span>
    </div>
    <div class="header-center">
      <h1 id="titulo-agenda">ğŸ§  Agenda de Pablo ğŸš†</h1>
      <div class="frase-motivacional" id="frase-motivacional" onclick="cambiarFraseMotivacional()" title="Haz clic para cambiar la frase">"El Ã©xito es la suma de pequeÃ±os esfuerzos repetidos dÃ­a tras dÃ­a"</div>
      <div class="fecha-actual" id="fecha-actual"></div>
    </div>
    <div style="display: flex; flex-direction: column; align-items: flex-end; width:120px;">
      <button id="btn-config" class="boton-cargar tooltip" onclick="toggleConfigFloating()" style="padding:6px 12px;font-size:12px;" data-tooltip="ConfiguraciÃ³n">âš™ï¸</button>
    </div>
  </div>

  <div id="alertas"></div>

  <div class="contenedor-dos-columnas">
    <div class="columna-izquierda">
      <section class="drop-zone" data-target="criticas">
        <h3>ğŸš¨ Tareas CrÃ­ticas ğŸš¨</h3>
        
        <!-- Filtros para tareas crÃ­ticas -->
        <div class="filtros-container">
          <button class="filtros-toggle" onclick="toggleFiltros('criticas')">
            <span>ğŸ” Filtros</span>
            <span id="filtros-icon-criticas">â–¼</span>
          </button>
          <div id="filtros-content-criticas" class="filtros-content">
            <div class="filtros-grid">
              <div class="filtro-grupo">
                <label class="filtro-label">Estado</label>
                <select id="filtro-estado-criticas" class="filtro-select" onchange="aplicarFiltros()">
                  <option value="">Todos</option>
                  <option value="pendiente">Pendientes</option>
                  <option value="migrada">Migradas</option>
                  <option value="programada">Programadas</option>
                  <option value="completada">Completadas</option>
                </select>
              </div>
              <div class="filtro-grupo">
                <label class="filtro-label">Fecha</label>
                <select id="filtro-fecha-criticas" class="filtro-select" onchange="aplicarFiltros()">
                  <option value="">Todas</option>
                  <option value="hoy">Hoy</option>
                  <option value="pasadas">Pasadas</option>
                  <option value="proximas">PrÃ³ximas</option>
                  <option value="sin-fecha">Sin fecha</option>
                </select>
              </div>
              <div class="filtro-grupo">
                <label class="filtro-label">Prioridad</label>
                <select id="filtro-prioridad-criticas" class="filtro-select" onchange="aplicarFiltros()">
                  <option value="">Todas</option>
                  <option value="urgente">Urgentes</option>
                  <option value="normal">Normales</option>
                </select>
              </div>
              <div class="filtro-grupo">
                <button class="btn-limpiar-filtros" onclick="limpiarFiltros('criticas')">Limpiar</button>
              </div>
            </div>
          </div>
        </div>
        
        <div id="lista-criticas"></div>
        <button class="boton-agregar tooltip" onclick="nuevaTareaCritica()" data-tooltip="Crear nueva tarea crÃ­tica">â• AÃ±adir tarea crÃ­tica</button>
      </section>

      <section>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
          <h3 style="margin: 0;">ğŸ“… Citas</h3>
          <div style="display: flex; gap: 3px; flex-wrap: wrap;">
            <button onclick="abrirModalNuevaCita()" class="boton-cargar calendar-btn" style="padding: 4px 8px; font-size: 10px; background: #4ecdc4; color: white;">â•</button>
            <button onclick="abrirModalCitasRelativas()" class="boton-cargar calendar-btn" style="padding: 4px 8px; font-size: 10px; background: #9c27b0; color: white;">ğŸ“…+</button>
            <button onclick="abrirModalCitaPeriodica()" class="boton-cargar calendar-btn" style="padding: 4px 8px; font-size: 10px; background: #e91e63; color: white;">ğŸ”„</button>
            <button onclick="abrirCalendario()" class="boton-cargar calendar-btn" style="padding: 4px 8px; font-size: 10px; background: #ff9800; color: white;">ğŸ“…</button>
          </div>
        </div>
        <div style="margin-bottom: 10px;">
          <select id="filtro-citas" onchange="cambiarFiltroCitas()" style="width: 100%; padding: 6px; border-radius: 6px; border: 1px solid #ddd; font-size: 12px;">
            <option value="todas">Todas las citas</option>
            <option value="proximas">15 dÃ­as atrÃ¡s + 30 adelante</option>
          </select>
        </div>
        <div id="citas-panel" style="max-height:200px;overflow-y:auto;"></div>
      </section>

      <section>
        <h3>ğŸ“ Notas / Brain Dump</h3>
        <textarea id="notas-texto" placeholder="Escribe aquÃ­ tus notas, ideas, recordatorios..."></textarea>
      </section>
    </div>

    <div class="columna-derecha">
      <section class="drop-zone" data-target="tareas">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
          <h3 style="margin: 0;">âœ… Lista para hacer</h3>
          <div style="display: flex; gap: 3px; flex-wrap: wrap;">
            <button id="btn-largo-plazo" onclick="toggleLargoPlazo()" class="boton-cargar calendar-btn" style="padding: 4px 8px; font-size: 9px; background: #4caf50;">Todas</button>
            <button onclick="abrirCalendarioTareas()" class="boton-cargar calendar-btn" style="padding: 4px 8px; font-size: 10px; background: #ff9800; color: white;">ğŸ“…</button>
          </div>
        </div>
        
        <!-- Filtros para tareas normales -->
        <div class="filtros-container">
          <button class="filtros-toggle" onclick="toggleFiltros('tareas')">
            <span>ğŸ” Filtros</span>
            <span id="filtros-icon-tareas">â–¼</span>
          </button>
          <div id="filtros-content-tareas" class="filtros-content">
            <div class="filtros-grid">
              <div class="filtro-grupo">
                <label class="filtro-label">Estado</label>
                <select id="filtro-estado-tareas" class="filtro-select" onchange="aplicarFiltros()">
                  <option value="">Todos</option>
                  <option value="pendiente">Pendientes</option>
                  <option value="migrada">Migradas</option>
                  <option value="programada">Programadas</option>
                  <option value="completada">Completadas</option>
                </select>
              </div>
              <div class="filtro-grupo">
                <label class="filtro-label">Fecha</label>
                <select id="filtro-fecha-tareas" class="filtro-select" onchange="aplicarFiltros()">
                  <option value="">Todas</option>
                  <option value="hoy">Hoy</option>
                  <option value="pasadas">Pasadas</option>
                  <option value="proximas">PrÃ³ximas</option>
                  <option value="sin-fecha">Sin fecha</option>
                </select>
              </div>
              <div class="filtro-grupo">
                <label class="filtro-label">Prioridad</label>
                <select id="filtro-prioridad-tareas" class="filtro-select" onchange="aplicarFiltros()">
                  <option value="">Todas</option>
                  <option value="urgente">Urgentes</option>
                  <option value="normal">Normales</option>
                </select>
              </div>
              <div class="filtro-grupo">
                <button class="btn-limpiar-filtros" onclick="limpiarFiltros('tareas')">Limpiar</button>
              </div>
            </div>
          </div>
        </div>
        
        <div id="lista-metodo"></div>
        <button class="boton-agregar tooltip" onclick="nuevaTarea()" data-tooltip="Crear nueva tarea">â• AÃ±adir tarea</button>
      </section>
    </div>
  </div>

</div>

<!-- Zona de borrado -->
<div id="delete-zone" class="delete-zone"></div>

<!-- Zona de migraciÃ³n -->
<div id="migrate-zone" class="migrate-zone"></div>

<!-- Modal del Calendario -->
<div id="modal-calendar" class="modal">
  <div class="modal-content" style="max-width:1000px;width:95%;max-height:90vh;overflow-y:auto;">
    <h4>ğŸ“… Calendario</h4>
    <div style="display:grid;grid-template-columns:250px 1fr;gap:20px;">
      <!-- Columna izquierda: Todas las citas -->
      <div style="border-right:1px solid #eee;padding-right:15px;">
        <h5 style="margin:0 0 10px 0;color:#2c3e50;">ğŸ“‹ Todas las citas</h5>
        <div id="allAppointmentsList" style="max-height:400px;overflow-y:auto;"></div>
      </div>
      
      <!-- Panel principal: Calendario y citas del dÃ­a -->
      <div>
        <div class="calendar-header">
          <button id="prevMonth" class="calendar-nav-btn">â—€</button>
          <h3 id="monthYear"></h3>
          <button id="nextMonth" class="calendar-nav-btn">â–¶</button>
        </div>
        <div class="calendar-weekdays">
          <div class="calendar-weekday">Lun</div>
          <div class="calendar-weekday">Mar</div>
          <div class="calendar-weekday">MiÃ©</div>
          <div class="calendar-weekday">Jue</div>
          <div class="calendar-weekday">Vie</div>
          <div class="calendar-weekday">SÃ¡b</div>
          <div class="calendar-weekday">Dom</div>
        </div>
        <div class="calendar-grid" id="calendarGrid" style="min-height:300px;"></div>
        <div class="calendar-appointments">
          <div id="appointmentsList"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal del Calendario de Tareas -->
<div id="modal-calendar-tareas" class="modal">
  <div class="modal-content" style="max-width:1000px;width:95%;max-height:90vh;overflow-y:auto;">
    <h4>ğŸ“… Calendario de Tareas</h4>
    <div style="display:grid;grid-template-columns:250px 1fr;gap:20px;">
      <!-- Columna izquierda: Todas las tareas con fecha -->
      <div style="border-right:1px solid #eee;padding-right:15px;">
        <h5 style="margin:0 0 10px 0;color:#2c3e50;">ğŸ“ Todas las tareas</h5>
        <div id="allTasksList" style="max-height:400px;overflow-y:auto;"></div>
      </div>
      
      <!-- Panel principal: Calendario y tareas del dÃ­a -->
      <div>
        <div class="calendar-header">
          <button id="prevMonthTareas" class="calendar-nav-btn">â—€</button>
          <h3 id="monthYearTareas"></h3>
          <button id="nextMonthTareas" class="calendar-nav-btn">â–¶</button>
        </div>
        <div class="calendar-weekdays">
          <div class="calendar-weekday">Lun</div>
          <div class="calendar-weekday">Mar</div>
          <div class="calendar-weekday">MiÃ©</div>
          <div class="calendar-weekday">Jue</div>
          <div class="calendar-weekday">Vie</div>
          <div class="calendar-weekday">SÃ¡b</div>
          <div class="calendar-weekday">Dom</div>
        </div>
        <div class="calendar-grid" id="calendarGridTareas" style="min-height:300px;"></div>
        <div class="calendar-appointments">
          <div id="tasksListDay"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para nueva tarea crÃ­tica -->
<div id="modal-critica" class="modal">
  <div class="modal-content">
    <h4>â­ Nueva Tarea CrÃ­tica</h4>
    <div class="form-group">
      <label>TÃ­tulo:</label>
      <input type="text" id="critica-titulo" placeholder="Ej: Revisar informe">
    </div>
    <div class="form-group">
      <label>Fecha lÃ­mite (opcional):</label>
      <input type="date" id="critica-fecha" onkeydown="return false;" onclick="this.showPicker();">
    </div>
    <div class="modal-botones">
      <button class="btn-primario" onclick="agregarTareaCritica()">AÃ±adir</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-critica')">Cancelar</button>
    </div>
  </div>
</div>

<!-- Modal para nueva tarea normal -->
<div id="modal-tarea" class="modal">
  <div class="modal-content">
    <h4>âœ… Nueva Tarea</h4>
    <div class="form-group">
      <label>DescripciÃ³n:</label>
      <input type="text" id="tarea-texto" placeholder="Ej: Llamar al proveedor">
    </div>
    <div class="form-group">
      <label>Fecha lÃ­mite (opcional):</label>
      <input type="date" id="tarea-fecha" onkeydown="return false;" onclick="this.showPicker();">
    </div>
    <div class="modal-botones">
      <button class="btn-primario" onclick="agregarTarea()">AÃ±adir</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-tarea')">Cancelar</button>
    </div>
  </div>
</div>

<!-- Modal para migrar/delegar -->
<div id="modal-migrar" class="modal">
  <div class="modal-content">
    <h4>Reprogramar / Delegar</h4>
    <div class="form-group">
      <label>ğŸ“… Nueva fecha:</label>
      <input type="date" id="migrar-fecha" onkeydown="return false;" onclick="this.showPicker();">
    </div>
    <div class="form-group">
      <label>ğŸ‘¤ Delegar a:</label>
      <div style="position: relative;">
        <input type="text" id="migrar-persona" placeholder="Nombre (opcional)" autocomplete="off">
        <div id="personas-dropdown" style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #ddd; border-radius: 4px; max-height: 150px; overflow-y: auto; z-index: 1000;"></div>
      </div>
    </div>
    <div class="modal-botones">
      <button class="btn-primario" onclick="guardarMigracion()">Aceptar</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-migrar')">Cancelar</button>
    </div>
  </div>
</div>

<!-- Modal para seleccionar hora -->
<div id="modal-hora" class="modal">
  <div class="modal-content" style="max-width:280px;padding:15px;">
    <h4 style="margin:0 0 10px 0;text-align:center;">ğŸ•°ï¸ Seleccionar Hora</h4>
    <div style="display:flex;gap:8px;align-items:center;justify-content:center;margin:10px 0;">
      <select id="hora-select" style="padding:6px;border-radius:4px;border:1px solid #ddd;font-size:14px;">
        <option value="08">08</option>
        <option value="09">09</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14" selected>14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
      </select>
      <span style="font-size:16px;font-weight:bold;">:</span>
      <select id="minuto-select" style="padding:6px;border-radius:4px;border:1px solid #ddd;font-size:14px;">
        <option value="00" selected>00</option>
        <option value="15">15</option>
        <option value="30">30</option>
        <option value="45">45</option>
      </select>
    </div>
    <div style="margin-bottom:10px;">
      <input type="text" id="cita-descripcion" placeholder="Â¿QuÃ© hacer?" style="width:100%;padding:8px;border-radius:4px;border:1px solid #ddd;font-size:14px;">
    </div>
    <div style="display:flex;gap:8px;">
      <button class="btn-primario" onclick="confirmarCita()" style="flex:1;padding:8px;font-size:13px;">AÃ±adir</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-hora')" style="flex:1;padding:8px;font-size:13px;">Cancelar</button>
    </div>
  </div>
</div>

<!-- Modal para nueva cita Ãºnica -->
<div id="modal-nueva-cita" class="modal">
  <div class="modal-content" style="max-width:350px;">
    <h4>ğŸ“… Nueva Cita</h4>
    
    <div class="form-group">
      <label>Fecha:</label>
      <input type="date" id="nueva-cita-fecha" onkeydown="return false;" onclick="this.showPicker();">
    </div>
    
    <div class="form-group">
      <label>DescripciÃ³n:</label>
      <input type="text" id="nueva-cita-desc" placeholder="Â¿QuÃ© hacer?">
    </div>
    
    <div class="form-group">
      <label style="display:flex;align-items:center;gap:10px;">
        <input type="checkbox" id="nueva-cita-google" checked>
        <span>ğŸ“… AÃ±adir a Google Calendar</span>
      </label>
    </div>
    
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;">
      <div>
        <label style="font-size:12px;">Hora:</label>
        <select id="nueva-cita-hora" style="width:100%;padding:6px;">
          <option value="08">08:00</option>
          <option value="09">09:00</option>
          <option value="10">10:00</option>
          <option value="11">11:00</option>
          <option value="12">12:00</option>
          <option value="13">13:00</option>
          <option value="14" selected>14:00</option>
          <option value="15">15:00</option>
          <option value="16">16:00</option>
          <option value="17">17:00</option>
          <option value="18">18:00</option>
          <option value="19">19:00</option>
          <option value="20">20:00</option>
          <option value="21">21:00</option>
          <option value="22">22:00</option>
        </select>
      </div>
      <div>
        <label style="font-size:12px;">Minutos:</label>
        <select id="nueva-cita-minutos" style="width:100%;padding:6px;">
          <option value="00" selected>00</option>
          <option value="15">15</option>
          <option value="30">30</option>
          <option value="45">45</option>
        </select>
      </div>
    </div>
    
    <div class="modal-botones">
      <button class="btn-primario" onclick="guardarNuevaCita()">AÃ±adir</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-nueva-cita')">Cancelar</button>
    </div>
  </div>
</div>

<!-- Modal de ConfiguraciÃ³n con PestaÃ±as -->
<div id="modal-config" class="modal">
  <div class="modal-content" style="max-width:500px;">
    <h4>âš™ï¸ ConfiguraciÃ³n</h4>
    
    <!-- PestaÃ±as -->
    <div class="config-tabs">
      <button class="config-tab active" onclick="switchTab('github')">ğŸ”¥ Firebase</button>
      <button class="config-tab" onclick="switchTab('google')">ğŸ“… Google</button>
      <button class="config-tab" onclick="switchTab('visual')">ğŸ¨ Visual</button>
      <button class="config-tab" onclick="switchTab('actions')">âš™ï¸ Acciones</button>
      <button class="config-tab" onclick="switchTab('options')">ğŸ”§ Opciones</button>
      <button class="config-tab" onclick="switchTab('guide')">ğŸ“– GuÃ­a</button>
    </div>
    
    <!-- Contenido Firebase -->
    <div id="tab-github" class="tab-content active">
      <div style="padding:20px;text-align:center;">
        <h3>ğŸ”¥ Firebase Firestore</h3>
        <p>Configura Firebase para sincronizaciÃ³n en tiempo real.</p>
        <div class="form-group">
          <label>API Key:</label>
          <input type="text" id="firebase-apikey" placeholder="AIzaSy...">
        </div>
        <div class="form-group">
          <label>Project ID:</label>
          <input type="text" id="firebase-projectid" placeholder="mi-proyecto-id">
        </div>
        <div class="form-group">
          <label>Messaging Sender ID (opcional):</label>
          <input type="text" id="firebase-messagingsenderid" placeholder="123456789">
        </div>
        <div class="form-group">
          <label>App ID (opcional):</label>
          <input type="text" id="firebase-appid" placeholder="1:123:web:abc">
        </div>
        <button class="btn-primario" onclick="guardarConfigFirebase()">Guardar Config</button>
        <button class="btn-secundario" onclick="probarConexionFirebase()">Probar</button>
      </div>
      <div id="extendsclass-status" style="margin-top:10px;font-size:13px;display:none;"></div>
    </div>
    
    <!-- Contenido Google Calendar -->
    <div id="tab-google" class="tab-content">
      <div style="padding:20px;text-align:center;">
        <h3>ğŸ“… Google Calendar</h3>
        <div class="form-group">
          <label>API Key:</label>
          <input type="text" id="google-apikey" placeholder="AIzaSy..." value="AIzaSyAQmGl6Q7wBzo7TyDMZmDtP5-_zb4LYN4w">
        </div>
        <div class="form-group">
          <label>Client ID:</label>
          <input type="text" id="google-clientid" placeholder="123-abc.apps.googleusercontent.com" value="675236622928-b3prqphl88u90me7j9tb6ikh0rqmt3jk.apps.googleusercontent.com">
        </div>
        <button class="btn-primario" onclick="guardarConfigGoogleCalendar()">Guardar Config</button>
        <button class="btn-secundario" onclick="testGoogleConnection()">TEST</button>
        <button class="btn-secundario" onclick="conectarGoogleCalendar()">Conectar a Google</button>
        <p style="font-size:11px;color:#666;margin-top:10px;">
          Al crear citas, marca el checkbox para aÃ±adir a Google Calendar
        </p>
      </div>
    </div>
    
    <!-- Contenido Visual -->
    <div id="tab-visual" class="tab-content">
      <div class="form-group">
        <label>Tema:</label>
        <select id="config-tema-select">
          <option value="claro">Claro</option>
          <option value="oscuro">Oscuro</option>
        </select>
      </div>
      <div class="form-group">
        <label>Nombre:</label>
        <input type="text" id="config-nombre-input" placeholder="Mi Agenda">
      </div>
      <div class="form-group">
        <label>Frases motivacionales (una por lÃ­nea):</label>
        <textarea id="config-frases" rows="4" placeholder="El Ã©xito es la suma de pequeÃ±os esfuerzos repetidos dÃ­a tras dÃ­a
Cada dÃ­a es una nueva oportunidad para mejorar
La disciplina es el puente entre metas y logros"></textarea>
      </div>
      <button class="btn-primario" onclick="guardarConfigVisualPanel()">Aplicar</button>
    </div>
    
    <!-- Contenido Acciones -->
    <div id="tab-actions" class="tab-content">
      <div style="margin-bottom:15px;text-align:center;">
        <p style="font-size:12px;color:#666;">ğŸ”„ SincronizaciÃ³n automÃ¡tica cada 30s</p>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;">
        <button class="btn-primario" onclick="guardarJSON()">ğŸ’¾ Guardar Ahora</button>
        <button class="btn-secundario" onclick="extendsClassPull()">ğŸ”„ Sincronizar</button>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;">
        <button class="btn-secundario" onclick="hacerCopia()">ğŸ“‹ Copiar JSON</button>
        <button class="btn-secundario" onclick="crearBackupManual()">ğŸ’¾ Descargar</button>
      </div>
      <div style="display:grid;grid-template-columns:1fr;gap:10px;">
        <button class="btn-secundario" onclick="restaurarBackup()">ğŸ“¥ Importar JSON</button>
      </div>
      <div style="display:grid;grid-template-columns:1fr;gap:10px;">
        <button class="btn-primario" onclick="activarNotificaciones()">ğŸ”” Activar Notificaciones</button>
      </div>
      <div style="display:grid;grid-template-columns:1fr;gap:10px;">
        <button class="btn-secundario" onclick="exportarGoogleCalendar()">ğŸ“… Exportar .ics</button>
      </div>
    </div>
    
    <!-- Contenido Opciones -->
    <div id="tab-options" class="tab-content">
      <div class="form-group">
        <label style="display:flex;align-items:center;gap:10px;">
          <input type="checkbox" id="config-forzar-fecha" onchange="guardarConfigOpciones()">
          <span>Forzar fecha al crear tareas</span>
        </label>
      </div>
      <div class="form-group">
        <label style="display:flex;align-items:center;gap:10px;">
          <input type="checkbox" id="config-sin-tactil" onchange="guardarConfigOpciones()">
          <span>Deshabilitar respuesta tÃ¡ctil</span>
        </label>
      </div>
      <div class="form-group">
        <label style="display:flex;align-items:center;gap:10px;">
          <input type="checkbox" id="config-mostrar-todo" onchange="guardarConfigOpciones()">
          <span>Mostrar todas las fechas por defecto</span>
        </label>
      </div>
      <div class="form-group">
        <label style="display:flex;align-items:center;gap:10px;">
          <input type="checkbox" id="config-botones-borrar" onchange="guardarConfigOpciones()">
          <span>Mostrar botones de borrar en tareas</span>
        </label>
      </div>
    </div>
    
    <!-- Contenido GuÃ­a -->
    <div id="tab-guide" class="tab-content">
      <div style="max-height:400px;overflow-y:auto;padding:10px;">
        <h5>ğŸ“– GuÃ­a de Uso</h5>
        <div style="margin-bottom:15px;">
          <h6>ğŸ”´ SÃ­mbolos de Estado:</h6>
          <ul style="font-size:12px;">
            <li><strong>â—</strong> - Tarea pendiente</li>
            <li><strong>â†’</strong> - Tarea migrada/delegada</li>
            <li><strong>&lt;</strong> - Tarea programada</li>
            <li><strong>âœ”</strong> - Tarea completada</li>
          </ul>
        </div>
        <div style="margin-bottom:15px;">
          <h6>ğŸ¯ Controles:</h6>
          <ul style="font-size:12px;">
            <li>Clic en sÃ­mbolo: cambiar estado</li>
            <li>Clic en texto: editar tarea</li>
            <li>BotÃ³n â•: aÃ±adir subtarea</li>
            <li>Arrastrar: mover entre columnas</li>
          </ul>
        </div>
        <div style="margin-bottom:15px;">
          <h6>ğŸ“… Filtros:</h6>
          <ul style="font-size:12px;">
            <li>15d: alternar vista de largo plazo</li>
            <li>ğŸ” Filtros: por estado, fecha, prioridad</li>
            <li>PrÃ³ximas 30 dÃ­as / Todas las citas</li>
          </ul>
        </div>
        <div style="margin-bottom:15px;">
          <h6>ğŸ”¥ Firebase Firestore:</h6>
          <ul style="font-size:12px;">
            <li><strong>1.</strong> SincronizaciÃ³n en tiempo real</li>
            <li><strong>2.</strong> 1GB gratis + 50k lecturas/dÃ­a</li>
            <li><strong>3.</strong> Respaldo automÃ¡tico de Google</li>
            <li><strong>4.</strong> Acceso desde cualquier dispositivo</li>
            <li><strong>5.</strong> Configurar en console.firebase.google.com</li>
          </ul>
        </div>
        <div>
          <h6>âš™ï¸ ConfiguraciÃ³n:</h6>
          <ul style="font-size:12px;">
            <li>Firebase: sincronizaciÃ³n en tiempo real</li>
            <li>Visual: tema, nombre, frases</li>
            <li>Opciones: fecha obligatoria, sin tÃ¡ctil</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="modal-botones">
      <button class="btn-secundario" onclick="cerrarModal('modal-config')">Cerrar</button>
    </div>
  </div>
</div>

<!-- Modal para ver historial -->
<div id="modal-historial" class="modal">
  <div class="modal-content" style="max-width:800px;width:95%;max-height:90vh;">
    <h4>ğŸ“œ Historial de Elementos Eliminados</h4>
    <div id="historial-contenido" style="max-height:70vh;overflow-y:auto;padding:10px;border:1px solid #ddd;border-radius:8px;background:#f9f9f9;"></div>
    <div class="modal-botones">
      <button class="btn-secundario" onclick="cerrarModal('modal-historial')">Cerrar</button>
    </div>
  </div>
</div>

<!-- Modal para cita periÃ³dica -->
<div id="modal-cita-periodica" class="modal">
  <div class="modal-content" style="max-width:400px;">
    <h4>ğŸ”„ Cita PeriÃ³dica</h4>
    
    <div class="form-group">
      <label>DescripciÃ³n:</label>
      <input type="text" id="periodica-descripcion" placeholder="Ej: ReuniÃ³n semanal">
    </div>
    
    <div class="form-group">
      <label>Fecha de inicio:</label>
      <input type="date" id="periodica-fecha-inicio" onkeydown="return false;" onclick="this.showPicker();">
    </div>
    
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;">
      <div>
        <label style="font-size:12px;">Hora:</label>
        <select id="periodica-hora" style="width:100%;padding:6px;">
          <option value="08">08:00</option>
          <option value="09">09:00</option>
          <option value="10">10:00</option>
          <option value="11">11:00</option>
          <option value="12">12:00</option>
          <option value="13">13:00</option>
          <option value="14" selected>14:00</option>
          <option value="15">15:00</option>
          <option value="16">16:00</option>
          <option value="17">17:00</option>
          <option value="18">18:00</option>
          <option value="19">19:00</option>
          <option value="20">20:00</option>
          <option value="21">21:00</option>
          <option value="22">22:00</option>
        </select>
      </div>
      <div>
        <label style="font-size:12px;">Minutos:</label>
        <select id="periodica-minutos" style="width:100%;padding:6px;">
          <option value="00" selected>00</option>
          <option value="15">15</option>
          <option value="30">30</option>
          <option value="45">45</option>
        </select>
      </div>
    </div>
    
    <div class="form-group">
      <label>Frecuencia:</label>
      <select id="periodica-frecuencia" style="width:100%;padding:8px;">
        <option value="semanal">Cada semana</option>
        <option value="quincenal">Cada 15 dÃ­as</option>
        <option value="mensual">Cada mes</option>
        <option value="semestral">Cada 6 meses</option>
        <option value="anual">Cada aÃ±o</option>
      </select>
    </div>
    
    <div class="form-group">
      <label>Generar hasta:</label>
      <input type="date" id="periodica-fecha-fin" onkeydown="return false;" onclick="this.showPicker();">
    </div>
    
    <div class="modal-botones">
      <button class="btn-primario" onclick="crearCitaPeriodica()">Crear</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-cita-periodica')">Cancelar</button>
    </div>
  </div>
</div>

<!-- Modal para citas con fechas relativas -->
<div id="modal-citas-relativas" class="modal">
  <div class="modal-content" style="max-width:450px;">
    <h4>ğŸ“… Conjunto de Citas</h4>
    
    <!-- Selector de fecha base -->
    <div class="form-group">
      <label>Fecha base:</label>
      <input type="date" id="fecha-base-citas" onkeydown="return false;" onclick="this.showPicker();" onchange="actualizarPreviewFecha()">
    </div>
    
    <!-- Lista de citas a agregar -->
    <div class="form-group">
      <label>Citas a agregar:</label>
      <div id="lista-citas-relativas" style="max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:8px;padding:10px;background:#f9f9f9;">
        <!-- Las citas se agregarÃ¡n aquÃ­ dinÃ¡micamente -->
      </div>
    </div>
    
    <!-- Formulario para nueva cita -->
    <div style="border-top:1px solid #eee;padding-top:15px;margin-top:15px;">
      <div class="form-group">
        <label>Nueva cita:</label>
        <input type="text" id="nueva-cita-descripcion" placeholder="DescripciÃ³n de la cita">
      </div>
      
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:10px;">
        <div>
          <label style="font-size:12px;">DÃ­as:</label>
          <input type="number" id="dias-offset" value="0" min="-365" max="365" style="width:100%;padding:6px;" oninput="actualizarPreviewFecha()">
        </div>
        <div>
          <label style="font-size:12px;">Meses:</label>
          <input type="number" id="meses-offset" value="0" min="-12" max="12" style="width:100%;padding:6px;" oninput="actualizarPreviewFecha()">
        </div>
        <div>
          <label style="font-size:12px;">AÃ±os:</label>
          <input type="number" id="anos-offset" value="0" min="-5" max="5" style="width:100%;padding:6px;" oninput="actualizarPreviewFecha()">
        </div>
      </div>
      
      <div id="preview-fecha" class="offset-preview">Fecha resultante: --</div>
      
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;">
        <div>
          <label style="font-size:12px;">Hora:</label>
          <select id="hora-cita-relativa" style="width:100%;padding:6px;">
            <option value="08">08:00</option>
            <option value="09">09:00</option>
            <option value="10">10:00</option>
            <option value="11">11:00</option>
            <option value="12">12:00</option>
            <option value="13">13:00</option>
            <option value="14" selected>14:00</option>
            <option value="15">15:00</option>
            <option value="16">16:00</option>
            <option value="17">17:00</option>
            <option value="18">18:00</option>
            <option value="19">19:00</option>
            <option value="20">20:00</option>
            <option value="21">21:00</option>
            <option value="22">22:00</option>
          </select>
        </div>
        <div>
          <label style="font-size:12px;">Minutos:</label>
          <select id="minutos-cita-relativa" style="width:100%;padding:6px;">
            <option value="00" selected>00</option>
            <option value="15">15</option>
            <option value="30">30</option>
            <option value="45">45</option>
          </select>
        </div>
      </div>
      
      <button onclick="agregarCitaRelativa()" class="boton-agregar" style="width:100%;margin-bottom:10px;">â• AÃ±adir cita</button>
    </div>
    
    <div class="modal-botones">
      <button class="btn-primario" onclick="guardarCitasRelativas()">Guardar todas</button>
      <button class="btn-secundario" onclick="cerrarModal('modal-citas-relativas')">Cancelar</button>
    </div>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<!-- Scripts modulares -->
<script src="js/app.js"></script>
<script src="js/tareas.js"></script>
<script src="js/calendario.js"></script>
<script src="js/sincronizacion-simple.js"></script>
<script src="js/rendimiento.js"></script>
<script src="js/compatibility.js"></script>

</body>
</html>